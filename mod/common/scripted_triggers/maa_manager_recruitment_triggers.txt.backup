######################################################
# Men-At-Arms Manager - MAA Type Recruitment Triggers
#
# These triggers replicate can_recruit conditions from
# original MAA type definitions to enable filtering in GUI
#
# Pattern: maa_manager_can_recruit_<typename>
# Scope: Character (player)
# Returns: Boolean (yes/no)
#
# MAA CATEGORIES:
# 1. REGULAR (Sedentary governments) - Light infantry, cavalry, archers, siege
# 2. NOMADIC (Nomadic/Herder governments) - Steppe raiders, lancers, etc.
# 3. TRADITIONAL (Culture traditions) - Huscarls, Druzhina, etc.
# 4. REGIONAL (Regional innovations) - Caballeros, War Elephants, etc.
#
# REGULAR MAA CATEGORY:
# All "Regular" MAA share one implicit requirement:
#   NOR { government_is_nomadic, government_is_herder }
# This is the defining characteristic of the category.
# Individual types may have ADDITIONAL requirements (innovations).
#
# SOURCE: https://ck3.paradoxwikis.com/Army
# "Regular Men-at-Arms are available to all cultures as long as
#  the other requirements are met."
######################################################

######################################################
# REGULAR MEN-AT-ARMS (from 00_maa_types.txt)
# Category requirement: Sedentary government (not nomadic/herder)
######################################################

# NO ADDITIONAL REQUIREMENTS - The 4 fundamental MAA types
# These only need sedentary government (the category requirement)

maa_manager_can_recruit_light_footmen = {
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_bowmen = {
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_light_horsemen = {
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_pikemen_unit = {
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

# INNOVATION REQUIREMENT - Armored units (Tribal Era+)
# Category requirement (sedentary gov) + Innovation unlock
# STATUS: NOT YET TESTED - DISABLED

maa_manager_can_recruit_armored_footmen = {
	always = no # TODO: Enable after testing
	# culture = { has_innovation = innovation_quilted_armor }
	# NOT = { culture = { has_cultural_parameter = strength_in_numbers_heavy_maa_ban } }
	# NOR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

maa_manager_can_recruit_armored_horsemen = {
	always = no # TODO: Enable after testing
	# culture = { has_innovation = innovation_arched_saddle }
	# NOR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

# INNOVATION REQUIREMENT - Advanced ranged (High Medieval Era+)
# STATUS: NOT YET TESTED - DISABLED

maa_manager_can_recruit_crossbowmen = {
	always = no # TODO: Enable after testing
	# culture = { has_innovation = innovation_advanced_bowmaking }
	# NOR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

# INNOVATION REQUIREMENT - Siege weapons (various eras)
# Category requirement (sedentary gov) + Siege innovation unlock
# STATUS: NOT YET TESTED - DISABLED

maa_manager_can_recruit_onager = {
	always = no # TODO: Enable after testing
	# culture = { has_innovation = innovation_catapult }
	# NOR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

maa_manager_can_recruit_mangonel = {
	always = no # TODO: Enable after testing
	# culture = { has_innovation = innovation_mangonel }
	# NOR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

maa_manager_can_recruit_trebuchet = {
	always = no # TODO: Enable after testing
	# culture = { has_innovation = innovation_trebuchet }
	# NOR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

maa_manager_can_recruit_bombard = {
	always = no # TODO: Enable after testing
	# culture = { has_innovation = innovation_bombard }
	# NOR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

######################################################
# NOMADIC TYPES (from 09_mpo_maa_types.txt)
# Condition: IS nomadic/herder government
# NOTE: nomadic_riders is NOT included - it's like Horde (basic troops),
#       created from Herd conversion, not recruitable MAA
# STATUS: NOT YET TESTED - DISABLED
######################################################

maa_manager_can_recruit_horse_archers = {
	always = no # TODO: Enable after testing
	# OR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

maa_manager_can_recruit_kheshig = {
	always = no # TODO: Enable after testing
	# OR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

maa_manager_can_recruit_steppe_raiders = {
	always = no # TODO: Enable after testing
	# OR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

maa_manager_can_recruit_heavy_horse_archers = {
	always = no # TODO: Enable after testing
	# OR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

maa_manager_can_recruit_nomad_lancers = {
	always = no # TODO: Enable after testing
	# OR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

maa_manager_can_recruit_mangudai = {
	always = no # TODO: Enable after testing
	# OR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

maa_manager_can_recruit_cataphract_archers = {
	always = no # TODO: Enable after testing
	# OR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

maa_manager_can_recruit_maturkan_warriors = {
	always = no # TODO: Enable after testing
	# OR = { government_has_flag = government_is_nomadic government_has_flag = government_is_herder }
}

######################################################
# CULTURAL TYPES (from 00_cultural_maa_types.txt)
# Condition: Culture has specific cultural parameter
######################################################

maa_manager_can_recruit_huscarl = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_huscarls }
	NOT = { culture = { has_cultural_parameter = strength_in_numbers_heavy_maa_ban } }
}

maa_manager_can_recruit_longbowmen = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_longbowmen }
}

maa_manager_can_recruit_cataphract = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_cataphract }
}

maa_manager_can_recruit_monaspa = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_monaspa }
}

maa_manager_can_recruit_metsanvartija = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_metsanvartija }
}

maa_manager_can_recruit_landsknecht = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_landsknecht }
}

maa_manager_can_recruit_goedendag = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_goedendag }
}

maa_manager_can_recruit_chasseur = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_chasseur }
}

maa_manager_can_recruit_picchieri = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_picchieri }
}

maa_manager_can_recruit_praetorian = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_praetorian }
}

maa_manager_can_recruit_caballero = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_caballero }
}

maa_manager_can_recruit_schiltron = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_schiltron }
}

maa_manager_can_recruit_mulaththamun = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_mulaththamun }
}

maa_manager_can_recruit_archers_of_the_nile = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_archers_of_the_nile }
}

maa_manager_can_recruit_paiks = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_paiks }
}

maa_manager_can_recruit_hussar = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_hussar }
}

maa_manager_can_recruit_horn_warrior = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_horn_warrior }
}

maa_manager_can_recruit_bush_hunter = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_bush_hunter }
}

maa_manager_can_recruit_shomer = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_shomer }
}

maa_manager_can_recruit_garudas = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_garudas }
}

maa_manager_can_recruit_khandayat = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_khandayat }
}

maa_manager_can_recruit_mountaineer = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_mountaineer }
}

maa_manager_can_recruit_sahel_horsemen = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_sahel_horsemen }
}

maa_manager_can_recruit_guinea_warrior = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_guinea_warrior }
}

maa_manager_can_recruit_abudrar = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_abudrar }
}

maa_manager_can_recruit_zbrojnosh = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_zbrojnosh }
}

maa_manager_can_recruit_palace_guards = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_palace_guards }
}

maa_manager_can_recruit_chu_ko_nu = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_chu_ko_nu }
}

maa_manager_can_recruit_guanch_vaulter = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_guanch_vaulter }
}

maa_manager_can_recruit_vigmen = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_vigmen }
}

maa_manager_can_recruit_bondi = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_bondi }
}

maa_manager_can_recruit_varangian_veterans = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_varangian_veterans }
}

maa_manager_can_recruit_jomsviking_pirates = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_jomsviking_pirates }
}

maa_manager_can_recruit_torch_bearers = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_torch_bearers }
}

maa_manager_can_recruit_zupin_warrior = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_zupin_warrior }
}

maa_manager_can_recruit_tawashi = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_tawashi }
}

######################################################
# DYNASTY LEGACY TYPES
######################################################

maa_manager_can_recruit_house_guard = {
	# House Guard - requires dynasty legacy
	has_dynasty = yes
	dynasty = {
		has_dynasty_perk = fp2_coterie_legacy_1
	}
}

maa_manager_can_recruit_asawira = {
	# Asawira - requires Iranian dynasty legacy (Khvarenah 4)
	has_dynasty = yes
	dynasty = {
		has_dynasty_perk = fp3_saoshyant_legacy_4
	}
}

######################################################
# BYZANTINE/EP3 TYPES
######################################################

maa_manager_can_recruit_ayrudzi = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_ayrudzi }
}

maa_manager_can_recruit_conrois = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_conrois }
}

maa_manager_can_recruit_akritai = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_akritai }
}

maa_manager_can_recruit_ballistrai = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_ballistrai }
}

maa_manager_can_recruit_skoutatoi = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_skoutatoi }
}

maa_manager_can_recruit_varangian_guards = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_varangian_guards }
}

######################################################
# OUTCAST/ADVENTURER TYPES
######################################################

maa_manager_can_recruit_handpicked_faithful = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_handpicked_faithful }
}

maa_manager_can_recruit_maa_bandits = {
	# Adventurer-only MAA, obtained via decisions
	# Not manually recruitable from the MAA interface
	always = no
}

maa_manager_can_recruit_maa_poachers = {
	# Adventurer-only MAA, obtained via decisions
	# Not manually recruitable from the MAA interface
	always = no
}

maa_manager_can_recruit_maa_marauders = {
	# Adventurer-only MAA, obtained via decisions
	# Not manually recruitable from the MAA interface
	always = no
}

maa_manager_can_recruit_maa_thieves = {
	# Adventurer-only MAA, obtained via decisions
	# Not manually recruitable from the MAA interface
	always = no
}

######################################################
# HOLY ORDER TYPES
######################################################

maa_manager_can_recruit_teutonic_knights = {
	# Holy order MAA - can't be manually recruited by players
	always = no
}

######################################################
# UNVERIFIED CULTURAL TYPES - DISABLED PENDING RESEARCH
# These types need proper cultural parameter research
######################################################

maa_manager_can_recruit_gendarme = {
	# TODO: Research proper cultural requirements
	# Temporarily disabled until verified
	always = no
}

maa_manager_can_recruit_hobelar = {
	# TODO: Research proper cultural requirements  
	# Temporarily disabled until verified
	always = no
}


maa_manager_can_recruit_ayyar = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_ayyar }
}

maa_manager_can_recruit_druzhina = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_druzhina }
}

maa_manager_can_recruit_mubarizun = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_mubarizun }
}

maa_manager_can_recruit_sarawit = {
	# TODO: Research proper cultural requirements
	# Temporarily disabled until verified
	always = no
}


maa_manager_can_recruit_war_elephant = {
	# Innovation-based: Requires elephantry innovation OR domicile parameter
	OR = {
		AND = {
			culture ?= { has_innovation = innovation_elephantry }
			NOT = { is_landless_adventurer = yes }
		}
		domicile ?= { has_domicile_parameter = camp_reinforce_elephant_regiments_anywhere }
	}
}

######################################################
# REGIONAL/UNRESTRICTED TYPES - DISABLED PENDING RESEARCH
# Need to verify actual cultural/regional requirements
######################################################

maa_manager_can_recruit_camel_rider = {
	# TODO: Research proper requirements (regional? cultural? innovation?)
	# Temporarily disabled until verified
	always = no
}

maa_manager_can_recruit_tarkhan = {
	# Tarkhan - nomadic heavy cavalry
	OR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

# DLC/Additional cultural types - add as needed
# Pattern: Check for cultural parameter using valid_for_maa_trigger

######################################################
# INNOVATION-BASED TYPES (TODO: Future enhancement)
######################################################
# Some MAA types require specific innovations:
# - war_elephant: innovation_elephantry (IMPLEMENTED ABOVE)
# - More innovation types may be added in future DLCs
#
# Pattern for innovation checking:
#   culture ?= { has_innovation = innovation_<name> }
######################################################

######################################################
# SPECIAL CASES
######################################################

# Accolade MAA types - require specific accolade rank 3+
# These can't be manually recruited, only granted via accolades
maa_manager_can_recruit_accolade_maa_archers = {
	always = no
}

maa_manager_can_recruit_accolade_maa_skirmishers = {
	always = no
}

maa_manager_can_recruit_accolade_maa_pikes = {
	always = no
}

maa_manager_can_recruit_accolade_maa_outriders = {
	always = no
}

maa_manager_can_recruit_accolade_maa_vanguards = {
	always = no
}

maa_manager_can_recruit_accolade_maa_lancers = {
	always = no
}

maa_manager_can_recruit_accolade_maa_crossbowers = {
	always = no
}

maa_manager_can_recruit_accolade_maa_cameliers = {
	always = no
}

maa_manager_can_recruit_accolade_maa_elephantiers = {
	always = no
}

maa_manager_can_recruit_accolade_maa_horse_archers = {
	always = no
}

# Holy Order MAA - can't be manually recruited
maa_manager_can_recruit_holy_order_type = {
	always = no
}

######################################################
# DEFAULT FALLBACK
# For any MAA types not explicitly listed above
######################################################

maa_manager_can_recruit_unknown = {
	always = yes  # Show unknown types to avoid hiding modded content
}

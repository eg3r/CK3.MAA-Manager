######################################################
# Men-At-Arms Manager - MAA Type Recruitment Triggers
#
# These triggers replicate can_recruit conditions from
# original MAA type definitions to enable filtering in GUI
#
# Pattern: maa_manager_can_recruit_<typename>
# Scope: Character (player)
# Returns: Boolean (yes/no)
#
# MAA CATEGORIES:
# 1. REGULAR (Sedentary governments) - Light infantry, cavalry, archers, siege
# 2. NOMADIC (Nomadic/Herder governments) - Steppe raiders, lancers, etc.
# 3. TRADITIONAL (Culture traditions) - Huscarls, Druzhina, etc.
# 4. REGIONAL (Regional innovations) - Caballeros, War Elephants, etc.
#
# REGULAR MAA CATEGORY:
# All "Regular" MAA share one implicit requirement:
#   NOR { government_is_nomadic, government_is_herder }
# This is the defining characteristic of the category.
# Individual types may have ADDITIONAL requirements (innovations).
#
# SOURCE: https://ck3.paradoxwikis.com/Army
# "Regular Men-at-Arms are available to all cultures as long as
#  the other requirements are met."
######################################################

######################################################
# REGULAR MEN-AT-ARMS (from 00_maa_types.txt)
# Category requirement: Sedentary government (not nomadic/herder)
######################################################

# NO ADDITIONAL REQUIREMENTS - The 4 fundamental MAA types
# These only need sedentary government (the category requirement)

maa_manager_can_recruit_light_footmen = {
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_bowmen = {
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_light_horsemen = {
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_pikemen_unit = {
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

# INNOVATION REQUIREMENT - Armored units (Tribal Era+)
# Category requirement (sedentary gov) + Innovation unlock

maa_manager_can_recruit_armored_footmen = {
	culture = {
		has_innovation = innovation_quilted_armor
	}
	NOT = {
		culture = { has_cultural_parameter = strength_in_numbers_heavy_maa_ban }
	}
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_armored_horsemen = {
	culture = {
		has_innovation = innovation_arched_saddle
	}
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

# INNOVATION REQUIREMENT - Advanced ranged (High Medieval Era+)

maa_manager_can_recruit_crossbowmen = {
	culture = {
		has_innovation = innovation_advanced_bowmaking
	}
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

# INNOVATION REQUIREMENT - Siege weapons (various eras)
# Category requirement (sedentary gov) + Siege innovation unlock

maa_manager_can_recruit_onager = {
	culture = {
		has_innovation = innovation_catapult
	}
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_mangonel = {
	culture = {
		has_innovation = innovation_mangonel
	}
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_trebuchet = {
	culture = {
		has_innovation = innovation_trebuchet
	}
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_bombard = {
	culture = {
		has_innovation = innovation_bombard
	}
	NOR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

######################################################
# NOMADIC TYPES (from 00_maa_types.txt)
# Condition: IS nomadic/herder government
######################################################

maa_manager_can_recruit_nomadic_riders = {
	OR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_horse_archers = {
	OR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_kheshig = {
	OR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_steppe_raiders = {
	OR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_heavy_horse_archers = {
	OR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_nomad_lancers = {
	OR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_mangudai = {
	OR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_cataphract_archers = {
	OR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

maa_manager_can_recruit_maturkan_warriors = {
	OR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

######################################################
# CULTURAL TYPES (from 00_cultural_maa_types.txt)
# Condition: Culture has specific cultural parameter
######################################################

maa_manager_can_recruit_huscarl = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_huscarls }
	NOT = { culture = { has_cultural_parameter = strength_in_numbers_heavy_maa_ban } }
}

maa_manager_can_recruit_longbowmen = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_longbowmen }
}

maa_manager_can_recruit_cataphract = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_cataphract }
}

maa_manager_can_recruit_monaspa = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_monaspa }
}

maa_manager_can_recruit_metsanvartija = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_metsanvartija }
}

######################################################
# UNVERIFIED CULTURAL TYPES - DISABLED PENDING RESEARCH
# These types need proper cultural parameter research
######################################################

maa_manager_can_recruit_gendarme = {
	# TODO: Research proper cultural requirements
	# Temporarily disabled until verified
	always = no
}

maa_manager_can_recruit_hobelar = {
	# TODO: Research proper cultural requirements  
	# Temporarily disabled until verified
	always = no
}

maa_manager_can_recruit_ghazi = {
	# DLC MAA type - not in base game
	# Commented out in GUI to prevent database errors
	always = no
}

maa_manager_can_recruit_ayyar = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_ayyar }
}

maa_manager_can_recruit_druzhina = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_druzhina }
}

maa_manager_can_recruit_mubarizun = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_mubarizun }
}

maa_manager_can_recruit_sarawit = {
	# TODO: Research proper cultural requirements
	# Temporarily disabled until verified
	always = no
}

maa_manager_can_recruit_zhande_pidagan = {
	# DLC MAA type - not in base game
	# Commented out in GUI to prevent database errors
	always = no
}

maa_manager_can_recruit_konni = {
	# DLC MAA type - not in base game
	# Commented out in GUI to prevent database errors
	always = no
}

maa_manager_can_recruit_siphonarius = {
	# DLC MAA type - not in base game
	# Commented out in GUI to prevent database errors
	always = no
}

maa_manager_can_recruit_mangudai_legacy = {
	valid_for_maa_trigger = { PARAMETER = unlock_maa_mangudai }
}

maa_manager_can_recruit_war_elephant = {
	# Innovation-based: Requires elephantry innovation OR domicile parameter
	OR = {
		AND = {
			culture ?= { has_innovation = innovation_elephantry }
			NOT = { is_landless_adventurer = yes }
		}
		domicile ?= { has_domicile_parameter = camp_reinforce_elephant_regiments_anywhere }
	}
}

######################################################
# REGIONAL/UNRESTRICTED TYPES - DISABLED PENDING RESEARCH
# Need to verify actual cultural/regional requirements
######################################################

maa_manager_can_recruit_camel_rider = {
	# TODO: Research proper requirements (regional? cultural? innovation?)
	# Temporarily disabled until verified
	always = no
}

maa_manager_can_recruit_tarkhan = {
	# Tarkhan - nomadic heavy cavalry
	OR = {
		government_has_flag = government_is_nomadic
		government_has_flag = government_is_herder
	}
}

# DLC/Additional cultural types - add as needed
# Pattern: Check for cultural parameter using valid_for_maa_trigger

######################################################
# INNOVATION-BASED TYPES (TODO: Future enhancement)
######################################################
# Some MAA types require specific innovations:
# - war_elephant: innovation_elephantry (IMPLEMENTED ABOVE)
# - More innovation types may be added in future DLCs
#
# Pattern for innovation checking:
#   culture ?= { has_innovation = innovation_<name> }
######################################################

######################################################
# SPECIAL CASES
######################################################

# Accolade MAA types - require specific accolade type
# These can't be manually recruited, only granted via accolades
maa_manager_can_recruit_accolade_maa_archers = {
	always = no
}

maa_manager_can_recruit_accolade_maa_crossbowers = {
	always = no
}

maa_manager_can_recruit_accolade_maa_elephantiers = {
	always = no
}

maa_manager_can_recruit_accolade_maa_cameliers = {
	always = no
}

maa_manager_can_recruit_accolade_maa_horse_archers = {
	always = no
}

maa_manager_can_recruit_accolade_maa_camel_cavalry = {
	always = no
}

maa_manager_can_recruit_accolade_maa_heavy_cavalry = {
	always = no
}

maa_manager_can_recruit_accolade_maa_heavy_infantry = {
	always = no
}

maa_manager_can_recruit_accolade_maa_light_cavalry = {
	always = no
}

maa_manager_can_recruit_accolade_maa_pikemen = {
	always = no
}

maa_manager_can_recruit_accolade_maa_skirmishers = {
	always = no
}

# Holy Order MAA - can't be manually recruited
maa_manager_can_recruit_holy_order_type = {
	always = no
}

######################################################
# DEFAULT FALLBACK
# For any MAA types not explicitly listed above
######################################################

maa_manager_can_recruit_unknown = {
	always = yes  # Show unknown types to avoid hiding modded content
}
